(()=>{"use strict";var e,t={211:()=>{const e=window.wp.blocks,t=window.React;function l(e){var t,a,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(a=l(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}const a=function(){for(var e,t,a=0,s="",c=arguments.length;a<c;a++)(e=arguments[a])&&(t=l(e))&&(s&&(s+=" "),s+=t);return s},s=window.wp.blockEditor,c=window.wp.element,n=window.wp.components,o=window.wp.i18n,r=window.wp.keycodes,i=e=>{const{attributes:l,setAttributes:a}=e,{timezone:s,clockLabel:i}=l,{timezones:m}=SPWPCLOCK,d=m.filter((e=>e?.disabled)),u=e=>{const t=m.filter((t=>!t?.disabled&&t.value.toLowerCase().includes(e.toLowerCase()))),l=[],a=[];return t.forEach((e=>{let t="UTC";if(e.value.includes("/")){const l=e.value.split("/");t=l[0]}else(e.value.includes(`${t}-`)||e.value.includes(`${t}+`))&&(t="Manual Offsets");if(!a.includes(t)){const e=d.filter((e=>e.label===t));l.push(e[0]),a.push(t)}l.push(e)})),l},k=s||"UTC",p=s?u(s):m,[w,g]=(0,c.useState)(1),[E,b]=(0,c.useState)(p),[v,f]=(0,c.useState)(!1),[h,N]=(0,c.useState)(k),y=e=>{e.target.closest(".single-clock-timezone-selector")||(f(!1),N(k))};(0,c.useEffect)((()=>(document.addEventListener("click",y),()=>{document.removeEventListener("click",y)})));const C=()=>{f(!0)},S=e=>{if(e.target.attributes?.disabled)return;const t=e.target.dataset.timezoneValue,l=u(t);s!==t&&a({clockLabel:t}),a({timezone:t}),g(1),b(l),N(t),f(!1)};let z;return v&&(z=E.length?(0,t.createElement)("ul",{className:"timezone-suggestions"},E.map(((e,l)=>{let a="timezone";l===w&&(a+=" timezone-active"),e.value===k&&(a+=" timezone-selected"),e?.disabled&&(a+=" timezone-disabled");let s=e.label;return e.value===k&&(s+=` ${(0,o.__)("(Selected)","world-clocks")}`),(0,t.createElement)("li",{className:a,key:e.value,"data-timezone-value":e.value,onClick:S,disabled:e?.disabled},s)}))):(0,t.createElement)("div",{className:"no-suggestions"},(0,t.createElement)("em",null,(0,o.__)("Please select a valid timezone from the available list.")))),(0,t.createElement)(n.PanelBody,{title:(0,o.__)("Timezone Settings","world-clocks"),className:"single-clock-timezone-setting"},(0,t.createElement)(n.TextControl,{className:"single-clock-timezone-selector",label:(0,o.__)("Select Timezone","world-clocks"),value:h,onChange:e=>{if(e){const t=u(e);b(t)}else b(m);g(1),N(e),f(!0)},onKeyDown:e=>{const{keyCode:t}=e;if(t===r.ENTER){if(E[w]?.disabled)return;const e=u(E[w].value);s!==E[w].value&&a({clockLabel:E[w].value}),a({timezone:E[w].value}),g(1),f(!1),N(E[w].value),b(e)}else if(t===r.UP){if(w<=1)return;g(w-1),void 0!==E[w-1]&&E[w-1]?.disabled&&g(w-2)}else if(t===r.DOWN){if(w+1===E.length)return;void 0!==E[w+1]&&E[w+1]?.disabled?g(w+2):g(w+1)}else t===r.ESCAPE&&(f(!1),N(k))},onFocus:C,onClick:C,help:(0,o.__)("Click on the textbox and start typing to find the suitable timezone. You can remove existing selected timezone and search more.","world-clocks")}),(0,t.createElement)(n.TextControl,{className:"single-clock-timezone-label",label:(0,o.__)("Timezone Label","world-clocks"),value:i,onChange:e=>{a({clockLabel:e})},help:(0,o.__)("Override default timezone label.","world-clocks")}),z)},m=window.wp.date,d=(e,t,l=!1,a="Y-m-d")=>{const s=(0,m.getSettings)();let c={string:e};l&&(c={offset:e});const n={...s,timezone:c};(0,m.setSettings)(n);const o=(0,m.date)(a,void 0,e),r=(0,m.date)(t,void 0,e),i=new Date(`${o} ${r}`),d=i.getHours(),u=i.getMinutes(),k=i.getSeconds(),p=d>=12?"pm":"am";return(0,m.setSettings)(s),{timeString:r,dateString:o,hours:d,minutes:u,seconds:k,ampm:p}},u=({timezone:e,clockLabel:l,context:s})=>{const n=["digital-column","digital-row"].includes(s["world-clocks/layout"])||s["world-clocks/showDigitalTime"],o="clock"===s["world-clocks/layout"],r="clock-reverse"===s["world-clocks/layout"];let i=e,m=!1;(e.toUpperCase().includes("UTC-")||e.toUpperCase().includes("UTC+"))&&(i=e.replace("UTC",""),m=!0);const{timeString:u,dateString:k,hours:p,minutes:w,seconds:g,ampm:E}=d(i,s["world-clocks/timeFormat"],m,s["world-clocks/dateFormat"]),[b,v]=(0,c.useState)(u),[f,h]=(0,c.useState)(k),[N,y]=(0,c.useState)(p),[C,S]=(0,c.useState)(w),[z,_]=(0,c.useState)(g),[F,T]=(0,c.useState)(E),x=()=>{const{timeString:e,dateString:t,hours:l,minutes:a,seconds:c,ampm:n}=d(i,s["world-clocks/timeFormat"],m,s["world-clocks/dateFormat"]);v(e),h(t),y(l),S(a),_(c),T(n)};(0,c.useEffect)((()=>{const e=setInterval(x);return()=>{clearInterval(e)}}));const O=a({[`${F}`]:s["world-clocks/showClocksAmPmIndicator"]}),L="line"===s["world-clocks/marksFormat"],D="combine"===s["world-clocks/marksFormat"],$=a({[`${s["world-clocks/marksFormat"]}`]:s["world-clocks/marksFormat"]});return(0,t.createElement)(t.Fragment,null,(o||r)&&(0,t.createElement)(t.Fragment,null,r&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",{className:"clock-label"},l),(n||s["world-clocks/showDate"])&&(0,t.createElement)("p",{className:"clock-datetime"},n&&(0,t.createElement)("span",{className:"digital-clock"},b),s["world-clocks/showDate"]&&(0,t.createElement)("span",{className:"clock-date"},f))),(0,t.createElement)("div",{className:"analog-clock"},(0,t.createElement)("div",{className:`indicator ${O}`},(0,t.createElement)("span",{className:"hand hour",style:{transform:`rotate(${30*N+.5*C}deg)`}}),(0,t.createElement)("span",{className:"hand minute",style:{transform:`rotate(${6*C+.1*z}deg)`}}),(0,t.createElement)("span",{className:"hand second",style:{transform:`rotate(${6*z}deg)`}})),(0,t.createElement)("span",{className:"number-indicator one"},(0,t.createElement)("span",{className:$},L||D?"|":"1")),(0,t.createElement)("span",{className:"number-indicator two"},(0,t.createElement)("span",{className:$},L||D?"|":"2")),(0,t.createElement)("span",{className:"number-indicator three"},(0,t.createElement)("span",{className:$},L?"|":"3")),(0,t.createElement)("span",{className:"number-indicator four"},(0,t.createElement)("span",{className:$},L||D?"|":"4")),(0,t.createElement)("span",{className:"number-indicator five"},(0,t.createElement)("span",{className:$},L||D?"|":"5")),(0,t.createElement)("span",{className:"number-indicator six"},(0,t.createElement)("span",{className:$},L?"|":"6")),(0,t.createElement)("span",{className:"number-indicator seven"},(0,t.createElement)("span",{className:$},L||D?"|":"7")),(0,t.createElement)("span",{className:"number-indicator eight"},(0,t.createElement)("span",{className:$},L||D?"|":"8")),(0,t.createElement)("span",{className:"number-indicator nine"},(0,t.createElement)("span",{className:$},L?"|":"9")),(0,t.createElement)("span",{className:"number-indicator ten"},(0,t.createElement)("span",{className:$},L||D?"|":"10")),(0,t.createElement)("span",{className:"number-indicator eleven"},(0,t.createElement)("span",{className:$},L||D?"|":"11")),(0,t.createElement)("span",{className:"number-indicator twelve"},(0,t.createElement)("span",{className:$},L?"|":"12"))),o&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",{className:"clock-label"},l),(n||s["world-clocks/showDate"])&&(0,t.createElement)("p",{className:"clock-datetime"},n&&(0,t.createElement)("span",{className:"digital-clock"},b),s["world-clocks/showDate"]&&(0,t.createElement)("span",{className:"clock-date"},f)))),n&&!o&&!r&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",{className:"clock-datetime"},(0,t.createElement)("span",{className:"digital-clock"},b),s["world-clocks/showDate"]&&(0,t.createElement)("span",{className:"clock-date"},f)),(0,t.createElement)("p",{className:"clock-label"},l)))},k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"world-clocks/clock","title":"Single clock","category":"widgets","icon":"clock","description":"Display single clock inside World Clocks block","parent":["world-clocks/clocks"],"attributes":{"timezone":{"type":"string","default":"UTC"},"clockLabel":{"type":"string","default":"UTC"}},"supports":{"html":false,"color":{"text":true,"background":true}},"usesContext":["world-clocks/showClocksAmPmIndicator","world-clocks/showDigitalTime","world-clocks/timeFormat","world-clocks/showDate","world-clocks/dateFormat","world-clocks/layout","world-clocks/marksFormat"],"textdomain":"world-clocks","editorScript":"file:../../../dist/clock-block.js","editorStyle":"file:../../../dist/clock-block.css","style":"file:../../../dist/style-clock-block.css"}');(0,e.registerBlockType)(k,{edit:e=>{const{attributes:l,context:a}=e,{timezone:c,clockLabel:n}=l,o=c.replace(" ","_"),r=(0,s.useBlockProps)();return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.InspectorControls,null,(0,t.createElement)(i,{...e})),(0,t.createElement)("div",{...r},(0,t.createElement)(u,{timezone:o,clockLabel:n,context:a})))},save:()=>null})}},l={};function a(e){var s=l[e];if(void 0!==s)return s.exports;var c=l[e]={exports:{}};return t[e](c,c.exports,a),c.exports}a.m=t,e=[],a.O=(t,l,s,c)=>{if(!l){var n=1/0;for(m=0;m<e.length;m++){for(var[l,s,c]=e[m],o=!0,r=0;r<l.length;r++)(!1&c||n>=c)&&Object.keys(a.O).every((e=>a.O[e](l[r])))?l.splice(r--,1):(o=!1,c<n&&(n=c));if(o){e.splice(m--,1);var i=s();void 0!==i&&(t=i)}}return t}c=c||0;for(var m=e.length;m>0&&e[m-1][2]>c;m--)e[m]=e[m-1];e[m]=[l,s,c]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={683:0,632:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var s,c,[n,o,r]=l,i=0;if(n.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(r)var m=r(a)}for(t&&t(l);i<n.length;i++)c=n[i],a.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return a.O(m)},l=globalThis.webpackChunk_sanketio_world_clocks=globalThis.webpackChunk_sanketio_world_clocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var s=a.O(void 0,[632],(()=>a(211)));s=a.O(s)})();